{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/petrol_station/frontend/src/context/auth-context.tsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  role: \"ADMIN\" | \"ATTENDANT\" | \"SUPPLIER\" | \"USER\";\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  isAuthenticated: boolean;\r\n  loading: boolean;\r\n  login: (email: string, password: string) => Promise<void>;\r\n  logout: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  // Fetch current user on app start\r\n  const fetchUser = async () => {\r\n    try {\r\n      const res = await axios.get(\"http://localhost:5000/api/auth/me\", { withCredentials: true });\r\n      setUser(res.data);\r\n    } catch {\r\n      setUser(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, []);\r\n\r\n  const login = async (email: string, password: string) => {\r\n    setLoading(true);\r\n    const res = await axios.post(\r\n      \"http://localhost:5000/api/auth/login\",\r\n      { email, password },\r\n      { withCredentials: true }\r\n    );\r\n    setUser(res.data.user);\r\n    // redirect based on role\r\n    switch (res.data.user.role) {\r\n      case \"ADMIN\": router.push(\"/admin/dashboard\"); break;\r\n      case \"ATTENDANT\": router.push(\"/attendant/dashboard\"); break;\r\n      case \"SUPPLIER\": router.push(\"/supplier/dashboard\"); break;\r\n      default: router.push(\"/\"); break;\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const logout = async () => {\r\n    await axios.post(\"http://localhost:5000/api/auth/logout\", {}, { withCredentials: true });\r\n    setUser(null);\r\n    router.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, isAuthenticated: !!user, loading, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) throw new Error(\"useAuth must be used within AuthProvider\");\r\n  return context;\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAAA;;;;;AAiBA,MAAM,4BAAc,IAAA,kOAAa,EAA8B;AAExD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,8MAAS;IAExB,kCAAkC;IAClC,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,MAAM,MAAM,4JAAK,CAAC,GAAG,CAAC,qCAAqC;gBAAE,iBAAiB;YAAK;YACzF,QAAQ,IAAI,IAAI;QAClB,EAAE,OAAM;YACN,QAAQ;QACV,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,8NAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,WAAW;QACX,MAAM,MAAM,MAAM,4JAAK,CAAC,IAAI,CAC1B,wCACA;YAAE;YAAO;QAAS,GAClB;YAAE,iBAAiB;QAAK;QAE1B,QAAQ,IAAI,IAAI,CAAC,IAAI;QACrB,yBAAyB;QACzB,OAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI;YACxB,KAAK;gBAAS,OAAO,IAAI,CAAC;gBAAqB;YAC/C,KAAK;gBAAa,OAAO,IAAI,CAAC;gBAAyB;YACvD,KAAK;gBAAY,OAAO,IAAI,CAAC;gBAAwB;YACrD;gBAAS,OAAO,IAAI,CAAC;gBAAM;QAC7B;QACA,WAAW;IACb;IAEA,MAAM,SAAS;QACb,MAAM,4JAAK,CAAC,IAAI,CAAC,yCAAyC,CAAC,GAAG;YAAE,iBAAiB;QAAK;QACtF,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,0PAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM,iBAAiB,CAAC,CAAC;YAAM;YAAS;YAAO;QAAO;kBAClF;;;;;;AAGP;AAEO,MAAM,UAAU;IACrB,MAAM,UAAU,IAAA,+NAAU,EAAC;IAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,OAAO;AACT","debugId":null}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/petrol_station/frontend/src/app/layout.tsx"],"sourcesContent":["import type { ReactNode } from \"react\"\r\nimport { AuthProvider } from \"../context/auth-context\"\r\nimport \"../styles/globals.css\"\r\n\r\nexport const metadata = {\r\n  title: \"Petrol Station Management System\",\r\n  description: \"Manage your petrol station operations efficiently\",\r\n}\r\n\r\nexport default function RootLayout({ children }: { children: ReactNode }) {\r\n  return (\r\n    <html lang=\"en\">\r\n      <head>\r\n        <meta charSet=\"utf-8\" />\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n        <meta name=\"theme-color\" content=\"#1a3a3a\" />\r\n      </head>\r\n      <body>\r\n        <AuthProvider>{children}</AuthProvider>\r\n      </body>\r\n    </html>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;AACA;;;;AAGO,MAAM,WAAW;IACtB,OAAO;IACP,aAAa;AACf;AAEe,SAAS,WAAW,EAAE,QAAQ,EAA2B;IACtE,qBACE,0PAAC;QAAK,MAAK;;0BACT,0PAAC;;kCACC,0PAAC;wBAAK,SAAQ;;;;;;kCACd,0PAAC;wBAAK,MAAK;wBAAW,SAAQ;;;;;;kCAC9B,0PAAC;wBAAK,MAAK;wBAAc,SAAQ;;;;;;;;;;;;0BAEnC,0PAAC;0BACC,cAAA,0PAAC,8JAAY;8BAAE;;;;;;;;;;;;;;;;;AAIvB","debugId":null}}]
}