{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/petrol_station/frontend/src/context/auth-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { createContext, useContext, useState, useEffect, type ReactNode } from \"react\"\r\n\r\ninterface User {\r\n  id: string\r\n  name: string\r\n  email: string\r\n  role: \"admin\" | \"user\" | string\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  token: string | null\r\n  isAuthenticated: boolean\r\n  loading: boolean\r\n  error: string | null\r\n  login: (email: string, password: string) => Promise<void>\r\n  register: (name: string, email: string, password: string) => Promise<User>\r\n  logout: () => void\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [token, setToken] = useState<string | null>(null)\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    const savedToken = localStorage.getItem(\"auth_token\")\r\n    const savedUser = localStorage.getItem(\"auth_user\")\r\n\r\n    if (savedToken && savedUser) {\r\n      try {\r\n        setToken(savedToken)\r\n        setUser(JSON.parse(savedUser))\r\n        setIsAuthenticated(true)\r\n      } catch {\r\n        localStorage.removeItem(\"auth_token\")\r\n        localStorage.removeItem(\"auth_user\")\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const saveAuth = (userData: User, token: string) => {\r\n    setUser(userData)\r\n    setToken(token)\r\n    setIsAuthenticated(true)\r\n    localStorage.setItem(\"auth_token\", token)\r\n    localStorage.setItem(\"auth_user\", JSON.stringify(userData))\r\n  }\r\n\r\n  const handleFetch = async (url: string, options: RequestInit) => {\r\n    const response = await fetch(url, options)\r\n    let data: any = null\r\n\r\n    try {\r\n      data = await response.json()\r\n    } catch {\r\n      throw new Error(\"Server returned invalid JSON\")\r\n    }\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data?.message || \"Request failed\")\r\n    }\r\n\r\n    return data\r\n  }\r\n\r\n  const login = async (email: string, password: string) => {\r\n    setLoading(true)\r\n    setError(null)\r\n\r\n    try {\r\n      const data = await handleFetch(\"http://localhost:5000/api/login\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, password }),\r\n      })\r\n\r\n      const userData: User = {\r\n        id: data.user.id,\r\n        name: data.user.name,\r\n        email: data.user.email,\r\n        role: data.user.role || \"user\",\r\n      }\r\n\r\n      saveAuth(userData, data.token)\r\n    } catch (err: any) {\r\n      setError(err.message)\r\n      throw err\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const register = async (name: string, email: string, password: string) => {\r\n    if (!user || user.role !== \"admin\") {\r\n      const message = \"Only admin can register new users\"\r\n      setError(message)\r\n      throw new Error(message)\r\n    }\r\n\r\n    setLoading(true)\r\n    setError(null)\r\n\r\n    try {\r\n      const data = await handleFetch(\"http://localhost:5000/api/register\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ name, email, password }),\r\n      })\r\n\r\n      const newUser: User = {\r\n        id: data.user.id,\r\n        name: data.user.name,\r\n        email: data.user.email,\r\n        role: data.user.role || \"user\",\r\n      }\r\n\r\n      return newUser\r\n    } catch (err: any) {\r\n      setError(err.message)\r\n      throw err\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    setUser(null)\r\n    setToken(null)\r\n    setIsAuthenticated(false)\r\n    localStorage.removeItem(\"auth_token\")\r\n    localStorage.removeItem(\"auth_user\")\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        token,\r\n        isAuthenticated,\r\n        loading,\r\n        error,\r\n        login,\r\n        register,\r\n        logout,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext)\r\n  if (!context) throw new Error(\"useAuth must be used within AuthProvider\")\r\n  return context\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/petrol_station/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/petrol_station/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/petrol_station/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}