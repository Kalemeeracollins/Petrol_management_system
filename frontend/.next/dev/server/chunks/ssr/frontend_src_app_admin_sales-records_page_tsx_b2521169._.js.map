{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/petrol_station/frontend/src/app/admin/sales-records/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\ninterface Sale {\r\n  id: number;\r\n  fuelTypeId: number;\r\n  attendantId: number;\r\n  quantitySold: number;\r\n  totalAmount: number;\r\n  saleDate: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  attendant?: { name: string };\r\n  fuelType?: { typeName: string };\r\n}\r\n\r\nexport default function SalesPage() {\r\n  const [sales, setSales] = useState<Sale[]>([]);\r\n  const [totals, setTotals] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n const fetchSalesData = async () => {\r\n  try {\r\n    setLoading(true);\r\n\r\n    const token = localStorage.getItem(\"token\"); // ðŸ‘ˆ get JWT token from storage\r\n\r\n    const headers: HeadersInit | undefined = token\r\n      ? { Authorization: `Bearer ${token}` }\r\n      : undefined;\r\n\r\n    const init: RequestInit = { headers };\r\n\r\n    const [salesRes, totalsRes] = await Promise.all([\r\n      fetch(\"http://localhost:5000/api/sales\", init),\r\n      fetch(\"http://localhost:5000/api/sales/totals\", init),\r\n    ]);\r\n\r\n    if (!salesRes.ok || !totalsRes.ok) {\r\n      throw new Error(`Failed to fetch data: ${salesRes.status}`);\r\n    }\r\n\r\n    const salesData = await salesRes.json();\r\n    const totalsData = await totalsRes.json();\r\n\r\n    setSales(salesData);\r\n    setTotals(totalsData);\r\n  } catch (err: any) {\r\n    setError(err.message || \"Something went wrong\");\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  if (loading) return <p>Loading sales data...</p>;\r\n  if (error) return <p style={{ color: \"red\" }}>Error: {error}</p>;\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\", fontFamily: \"Arial\" }}>\r\n      <h1 style={{ textAlign: \"center\" }}>Fuel Sales Report</h1>\r\n\r\n      {/* Sales Table */}\r\n      <h2>All Sales</h2>\r\n      <table border={1} cellPadding={8} cellSpacing={0} width=\"100%\">\r\n        <thead style={{ background: \"#f3f3f3\" }}>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Fuel Type</th>\r\n            <th>Attendant</th>\r\n            <th>Quantity Sold (L)</th>\r\n            <th>Total Amount (UGX)</th>\r\n            <th>Sale Date</th>\r\n            <th>Created At</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {sales.length > 0 ? (\r\n            sales.map((sale) => (\r\n              <tr key={sale.id}>\r\n                <td>{sale.id}</td>\r\n                <td>{sale.fuelType?.typeName || sale.fuelTypeId}</td>\r\n                <td>{sale.attendant?.name || sale.attendantId}</td>\r\n                <td>{sale.quantitySold}</td>\r\n                <td>{sale.totalAmount.toLocaleString()}</td>\r\n                <td>{new Date(sale.saleDate).toLocaleDateString()}</td>\r\n                <td>{new Date(sale.createdAt).toLocaleString()}</td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan={7} style={{ textAlign: \"center\" }}>\r\n                No sales data available\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Totals Section */}\r\n      <h2 style={{ marginTop: \"40px\" }}>Totals per Attendant</h2>\r\n      <table border={1} cellPadding={8} cellSpacing={0} width=\"100%\">\r\n        <thead style={{ background: \"#f3f3f3\" }}>\r\n          <tr>\r\n            <th>Attendant</th>\r\n            <th>Total Quantity Sold (L)</th>\r\n            <th>Total Amount (UGX)</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {totals.length > 0 ? (\r\n            totals.map((t) => (\r\n              <tr key={t.attendantId}>\r\n                <td>{t.attendant?.name || t.attendantId}</td>\r\n                <td>{t.totalQuantitySold}</td>\r\n                <td>{t.totalAmount.toLocaleString()}</td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan={3} style={{ textAlign: \"center\" }}>\r\n                No totals data found\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}